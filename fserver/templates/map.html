{% extends "layout.html" %}

{% block content %}
<h1>Google Map</h1>
<div id="map"></div>
<script>
function initMap() {
	var sjc = {lat: 37.357944, lng: -121.897087};
	//var sfo = {lat: 37.6213129, lng: -122.3789554};
	//var oak = {lat: 37.7125689, lng: -122.2197428};

	var map = new google.maps.Map(document.getElementById('map'), {
		center: sjc,
		zoom: 13,
		myTypeId: google.maps.MapTypeId.ROADMAP
	});

	var start_locations = [];
	var end_locations = [];

	var polylines = [];

	{% for pl in polylines %}
		var bounds = new google.maps.LatLngBounds();

		var polyline = new google.maps.Polyline({
			path: google.maps.geometry.encoding.decodePath("{{pl}}"),
			map: map
		});
		polylines.push(polyline);

		for (var i = 0; i < polyline.getPath().getLength(); i++) {
			bounds.extend(polyline.getPath().getAt(i));
		}
		map.fitBounds(bounds);
	{% endfor %}
}
</script>

<script async defer
     src="https://maps.googleapis.com/maps/api/js?key=AIzaSyASh_MzDRPXhWA2VlhANyBA5cPYJcOyOA4&libraries=geometry&callback=initMap">
</script>
{% endblock %}
